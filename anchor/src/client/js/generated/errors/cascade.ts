/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import { isProgramError, type Address, type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM, type SolanaError } from 'gill';
import { CASCADE_PROGRAM_ADDRESS } from '../programs';

/** StreamInactive: This stream is no longer active */
export const CASCADE_ERROR__STREAM_INACTIVE = 0x1770; // 6000
/** UnauthorizedEmployee: Only the employee can perform this action */
export const CASCADE_ERROR__UNAUTHORIZED_EMPLOYEE = 0x1771; // 6001
/** UnauthorizedEmployer: Only the employer can perform this action */
export const CASCADE_ERROR__UNAUTHORIZED_EMPLOYER = 0x1772; // 6002
/** InsufficientBalance: Insufficient balance available for withdrawal */
export const CASCADE_ERROR__INSUFFICIENT_BALANCE = 0x1773; // 6003
/** EmployeeStillActive: Employee is still active, cannot perform emergency withdrawal */
export const CASCADE_ERROR__EMPLOYEE_STILL_ACTIVE = 0x1774; // 6004
/** EmployerLockActive: Employer lock period has not expired yet */
export const CASCADE_ERROR__EMPLOYER_LOCK_ACTIVE = 0x1775; // 6005
/** MathOverflow: Mathematical operation overflow */
export const CASCADE_ERROR__MATH_OVERFLOW = 0x1776; // 6006
/** StreamStillActive: Stream is still active and cannot be closed */
export const CASCADE_ERROR__STREAM_STILL_ACTIVE = 0x1777; // 6007
/** InvalidTimestamp: Invalid timestamp detected */
export const CASCADE_ERROR__INVALID_TIMESTAMP = 0x1778; // 6008
/** UnsupportedMintDecimals: Only 6-decimal stablecoin mints are supported */
export const CASCADE_ERROR__UNSUPPORTED_MINT_DECIMALS = 0x1779; // 6009
/** InvalidTokenAccount: Provided token account does not match expected owner or mint */
export const CASCADE_ERROR__INVALID_TOKEN_ACCOUNT = 0x177a; // 6010

export type CascadeError = typeof CASCADE_ERROR__EMPLOYEE_STILL_ACTIVE | typeof CASCADE_ERROR__EMPLOYER_LOCK_ACTIVE | typeof CASCADE_ERROR__INSUFFICIENT_BALANCE | typeof CASCADE_ERROR__INVALID_TIMESTAMP | typeof CASCADE_ERROR__INVALID_TOKEN_ACCOUNT | typeof CASCADE_ERROR__MATH_OVERFLOW | typeof CASCADE_ERROR__STREAM_INACTIVE | typeof CASCADE_ERROR__STREAM_STILL_ACTIVE | typeof CASCADE_ERROR__UNAUTHORIZED_EMPLOYEE | typeof CASCADE_ERROR__UNAUTHORIZED_EMPLOYER | typeof CASCADE_ERROR__UNSUPPORTED_MINT_DECIMALS;

let cascadeErrorMessages: Record<CascadeError, string> | undefined;
if (process.env.NODE_ENV !== 'production') {
  cascadeErrorMessages = { [CASCADE_ERROR__EMPLOYEE_STILL_ACTIVE]: `Employee is still active, cannot perform emergency withdrawal`, [CASCADE_ERROR__EMPLOYER_LOCK_ACTIVE]: `Employer lock period has not expired yet`, [CASCADE_ERROR__INSUFFICIENT_BALANCE]: `Insufficient balance available for withdrawal`, [CASCADE_ERROR__INVALID_TIMESTAMP]: `Invalid timestamp detected`, [CASCADE_ERROR__INVALID_TOKEN_ACCOUNT]: `Provided token account does not match expected owner or mint`, [CASCADE_ERROR__MATH_OVERFLOW]: `Mathematical operation overflow`, [CASCADE_ERROR__STREAM_INACTIVE]: `This stream is no longer active`, [CASCADE_ERROR__STREAM_STILL_ACTIVE]: `Stream is still active and cannot be closed`, [CASCADE_ERROR__UNAUTHORIZED_EMPLOYEE]: `Only the employee can perform this action`, [CASCADE_ERROR__UNAUTHORIZED_EMPLOYER]: `Only the employer can perform this action`, [CASCADE_ERROR__UNSUPPORTED_MINT_DECIMALS]: `Only 6-decimal stablecoin mints are supported` };
}

export function getCascadeErrorMessage(code: CascadeError): string {
  if (process.env.NODE_ENV !== 'production') {
    return (cascadeErrorMessages as Record<CascadeError, string>)[code];
  }

  return 'Error message not available in production bundles.';
}

export function isCascadeError<TProgramErrorCode extends CascadeError>(
    error: unknown,
    transactionMessage: { instructions: Record<number, { programAddress: Address }> },
    code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> & Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(error, transactionMessage, CASCADE_PROGRAM_ADDRESS, code);
}